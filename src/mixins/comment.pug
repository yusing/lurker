include ../utils
mixin comment(com, isfirst)
  - var data = com.data
  - var kind = com.kind
  if kind == "more"
    div(class=`${isfirst?'first':''}`)
      div.more #{data.count} more comments
  else
    div(class=`comment ${isfirst?'first':''}`)
      div.comment-info-container
        div.info-item #{fmtnum(data.ups)} â†‘ 
        div.info-item u/#{data.author} #{data.is_submitter?'(OP)':''}
        if data.collapsed_reason_code == "DELETED"
          div.info-item 
            a(href=`https://undelete.pullpush.io${data.permalink}`) search on undelete
        div.info-item #{timeDifference(Date.now(), data.created * 1000)}
      div.comment-body 
        != data.body_html
      div.replies
      if data.replies
        if data.replies.data
          if data.replies.data.children
            each reply in data.replies.data.children
              +comment(reply,false)
